======================================================= 
BUNDLE COMPLET DU PROJET NEXT.JS                      
======================================================= 
Date: 11/12/2025 13:16:45,78                                      
Dossier: C:\Users\Lenovo\Documents\webdev\Mon-blog\mon-blog                                 
Dossiers inclus: app, components, lib                  
======================================================= 
 
[SECTION 1] ARBORESCENCE DU PROJET                     
======================================================= 
 
DOSSIER: \app                                   
------------------------------------------------- 
C:\Users\Lenovo\Documents\webdev\Mon-blog\mon-blog\app\admin
C:\Users\Lenovo\Documents\webdev\Mon-blog\mon-blog\app\favicon.ico
C:\Users\Lenovo\Documents\webdev\Mon-blog\mon-blog\app\globals.css
C:\Users\Lenovo\Documents\webdev\Mon-blog\mon-blog\app\layout.tsx
C:\Users\Lenovo\Documents\webdev\Mon-blog\mon-blog\app\page.tsx
C:\Users\Lenovo\Documents\webdev\Mon-blog\mon-blog\app\posts
C:\Users\Lenovo\Documents\webdev\Mon-blog\mon-blog\app\admin\page.tsx
C:\Users\Lenovo\Documents\webdev\Mon-blog\mon-blog\app\posts\[slug]
C:\Users\Lenovo\Documents\webdev\Mon-blog\mon-blog\app\posts\[slug]\page.tsx
 
DOSSIER: \components                                   
------------------------------------------------- 
C:\Users\Lenovo\Documents\webdev\Mon-blog\mon-blog\components\AllPosts.tsx
C:\Users\Lenovo\Documents\webdev\Mon-blog\mon-blog\components\Footer.tsx
C:\Users\Lenovo\Documents\webdev\Mon-blog\mon-blog\components\Header.tsx
C:\Users\Lenovo\Documents\webdev\Mon-blog\mon-blog\components\LatestPost.tsx
C:\Users\Lenovo\Documents\webdev\Mon-blog\mon-blog\components\LoginModal.tsx
C:\Users\Lenovo\Documents\webdev\Mon-blog\mon-blog\components\PostCard.tsx
 
DOSSIER: \lib                                   
------------------------------------------------- 
C:\Users\Lenovo\Documents\webdev\Mon-blog\mon-blog\lib\firebase.js
C:\Users\Lenovo\Documents\webdev\Mon-blog\mon-blog\lib\firestore.ts
C:\Users\Lenovo\Documents\webdev\Mon-blog\mon-blog\lib\supabaseClient.ts
C:\Users\Lenovo\Documents\webdev\Mon-blog\mon-blog\lib\temp.js
 
======================================================= 
FIN DE L'ARBORESCENCE                                  
======================================================= 
 
 
[SECTION 2] CONTENU COMPLET DES FICHIERS               
======================================================= 
 
[SOUS-SECTION 2.1] FICHIERS DE CONFIGURATION RACINE    
------------------------------------------------------- 
 
[FICHIER 1] \package.json               
************************************************ 
{
  "name": "mon-blog",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "eslint"
  },
  "dependencies": {
    "@supabase/supabase-js": "^2.86.0",
    "firebase": "^12.6.0",
    "next": "^16.0.8",
    "react": "19.2.0",
    "react-dom": "19.2.0"
  },
  "devDependencies": {
    "@tailwindcss/postcss": "^4",
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "eslint": "^9",
    "eslint-config-next": "16.0.3",
    "tailwindcss": "^4",
    "typescript": "^5"
  }
}
 
************************************************ 
 
[FICHIER 2] \next.config.ts               
************************************************ 
/** @type {import('next').NextConfig} */
const nextConfig = {
  // Configuration pour le compilateur (Next.js 13+, pour Turbopack/SWC)
  compiler: {
    // Par exemple, d√©sactiver console.log en production
    // removeConsole: process.env.NODE_ENV === "production",
  },
  
  // Configuration pour le composant Image
  images: {
    // Liste des domaines externes autoris√©s
    remotePatterns: [
      {
        protocol: 'https',
        // Domaine ajout√© pr√©c√©demment
        hostname: 'storage.canalblog.com', 
        port: '',
        pathname: '/**',
      },
      {
        protocol: 'https',
        // NOUVEAU DOMAINE : images.pexels.com pour l'image qui cause l'erreur actuelle
        hostname: 'images.pexels.com', 
        port: '',
        pathname: '/**',
      },
      {
        protocol: 'https',
        // NOUVEAU DOMAINE : images.pexels.com pour l'image qui cause l'erreur actuelle
        hostname: 'res.cloudinary.com', 
        port: '',
        pathname: '/**',
      },
      // Ajoutez ici d'autres domaines externes si vous en utilisez 
    ],
  },
  
  // Si vous utilisez Turbopack, cette ligne peut √™tre n√©cessaire, sinon elle est ignor√©e
  // experimental: {
  //   serverActions: true,
  // },
};

module.exports = nextConfig; 
************************************************ 
 
[FICHIER 3] \tsconfig.json               
************************************************ 
{
  "compilerOptions": {
    "target": "ES2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "react-jsx",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts",
    "**/*.mts"
  ],
  "exclude": ["node_modules"]
}
 
************************************************ 
 
[SOUS-SECTION 2.2] FICHIERS DES DOSSIERS SPECIFIQUES   
------------------------------------------------------- 
 
[DOSSIER: \app]                                 
=============================================== 
 
[FICHIER 4] \app\globals.css 
------------------------------------------- 
@import "tailwindcss";

/* D√©sactive le dark mode forc√© de Chrome Android */
html {
  color-scheme: light dark;
}


:root {
  --background: #ffffff;
  --foreground: #171717;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}
 
------------------------------------------- 
 
[FICHIER 5] \app\layout.tsx 
------------------------------------------- 
// app/layout.tsx

import type { Metadata } from 'next';
import { Inter } from 'next/font/google'; // Importation de la police Inter
import './globals.css'; // Importe le CSS global
import Header from '@/components/Header';
import Footer from '@/components/Footer';
export const dynamic = "force-dynamic";

// Initialisation de la police
const inter = Inter({ subsets: ['latin'] });

// M√©tadonn√©es de l'application
export const metadata: Metadata = {
  title: 'Mon Blog Next.js & Firebase',
  description: 'Un blog construit pas √† pas avec Next.js, Tailwind, et Firebase.',
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  // Cette classe assure le fond sombre pour le <body> et corrige l'erreur d'hydratation.
  const bodyClasses = `${inter.className} bg-slate-900 text-gray-100 min-h-screen flex flex-col`;

  return (
    <html lang="fr">
      <body className={bodyClasses}>
        
        <Header />
        
        {/* CORRECTION: Ajout de bg-slate-900 √† l'√©l√©ment <main> pour garantir que le fond de la zone de contenu est sombre. */}
        <main className="flex-grow bg-slate-900"> 
          {children}
        </main>

        <Footer />
      </body>
    </html>
  );
} 
------------------------------------------- 
 
[FICHIER 6] \app\page.tsx 
------------------------------------------- 
import LatestPost from "@/components/LatestPost";
import AllPosts from "@/components/AllPosts";

export default function Home() {
  return (
    <div className="max-w-6xl mx-auto py-16 px-4">

      <header className="text-center mb-12">
        <h1 className="text-6xl font-extrabold text-white tracking-tight">
          Mon Blog Moto
        </h1>
        <p className="text-xl text-gray-400 mt-3">
          Le dernier article est charg√© dynamiquement ci-dessous.
        </p>
      </header>

      {/* Dernier article */}
      <section className="mt-10">
        <h2 className="text-4xl font-bold text-gray-200 mb-6 text-center">
          Dernier Article publi√©
        </h2>

        <LatestPost />
      </section>

      {/* Tous les articles */}
      <section className="mt-20">
        <h2 className="text-3xl font-bold text-gray-200 mb-6">
          Tous les articles
        </h2>

        <AllPosts />
      </section>

    </div>
  );
}
 
------------------------------------------- 
 
[FICHIER 7] \app\admin\page.tsx 
------------------------------------------- 
export default function Home() {
  return ( <div><p>no thing to compare</p> </div>  )} 
------------------------------------------- 
 
[FICHIER 8] \app\posts\[slug]\page.tsx 
------------------------------------------- 
import { notFound } from 'next/navigation';
import Image from 'next/image'; 
import { getPostBySlug, Post } from '@/lib/firestore'; 

interface PostPageProps {
  // Les params sont d√©finis ici
  params: {
    slug: string;
  };
}

/**
 * Composant de page dynamique pour afficher un article sp√©cifique.
 * Le composant est 'async' pour pouvoir utiliser 'await'.
 */
export default async function PostPage({ params }: PostPageProps) {
    // CORRECTION CRITIQUE : Utilisation de 'await' pour s'assurer que les params
    // sont r√©solus correctement.
    const resolvedParams = await params;
    const slug = resolvedParams.slug;


  // V√âRIFICATION DE S√âCURIT√â : Assurer que le slug est d√©fini
  if (!slug) {
    notFound(); 
  }
  
  // Utilisation de 'await' pour r√©soudre la Promise de la BDD.
  const post: Post | null = await getPostBySlug(slug); 

  // Si le post n'est pas trouv√©
  if (!post) {
    notFound(); 
  }

  // Conversion du Timestamp (post.createdAt) en Date pour l'affichage.
  const displayDate = post.createdAt.toDate().toLocaleDateString('fr-FR');


  return (
    <div className="container mx-auto p-8 max-w-4xl bg-slate-800 shadow-2xl rounded-xl mt-10 text-white">
      <article className="space-y-6">
        <header className="border-b border-slate-700 pb-4 mb-6">
          <h1 className="text-4xl font-extrabold text-white mb-2">
            {post.title}
          </h1>
          <p className="text-sm text-gray-400">
            Publi√© le {displayDate} par <span className="text-indigo-400 font-medium">{post.author}</span>
          </p>
        </header>
        
        {/* -------------------- D√âBUT DU BLOC IMAGE (Correction Largeur et Hauteur) -------------------- */}
        {post.imageUrl && (
            // w-full pour 100% largeur. 
            // h-64 sur mobile, md:aspect-video sur desktop pour une hauteur limit√©e mais proportionnelle.
            // bg-slate-900 pour le fond tr√®s sombre derri√®re l'image non couverte.
            <div className="relative w-full h-64 md:aspect-video md:h-auto overflow-hidden rounded-lg shadow-xl mb-8 bg-slate-900">
                <Image
                    src={post.imageUrl}
                    alt={post.title} 
                    fill 
                    // NOUVEAU: 'object-contain' assure que l'image est enti√®rement visible 
                    // sans √™tre d√©form√©e, utilisant le bg-slate-900 pour remplir l'espace vide.
                    style={{ objectFit: 'contain' }} 
                    priority 
                    sizes="(max-width: 768px) 100vw, 800px"
                    className="transition-transform duration-500 hover:scale-105" 
                />
            </div>
        )}
        {/* -------------------- FIN DU BLOC IMAGE -------------------- */}

        {/* Affichage du contenu du post */}
        <div 
          // Utilisation de dangerouslySetInnerHTML pour injecter le contenu (potentiellement HTML/Markdown converti)
          className="prose prose-lg max-w-none text-gray-200 leading-relaxed"
          dangerouslySetInnerHTML={{ __html: post.content || post.description }} 
        />
        
        <div className="pt-6 border-t border-slate-700 mt-8">
            <a href="/" className="inline-block px-4 py-2 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 transition duration-300">
                Retour √† l'accueil
            </a>
        </div>
      </article>
    </div>
  );
}

// Fonction de g√©n√©ration des m√©tadonn√©es
export async function generateMetadata({ 
    params,
}: PostPageProps) {
    // CORRECTION CRITIQUE : Utilisation de 'await' pour s'assurer que les params
    // sont r√©solus correctement.
    const resolvedParams = await params;
    const slug = resolvedParams.slug;
    
    // V√âRIFICATION DE S√âCURIT√â : Assurer que le slug est d√©fini avant l'appel DB
    if (!slug) {
        // Retourne un titre par d√©faut si le slug est manquant
        return { title: 'Article Non Trouv√©', description: 'Le param√®tre de slug est manquant.' };
    }
    
  // R√©cup√©ration des donn√©es pour les m√©tadonn√©es (doit √™tre await√©)
  const post: Post | null = await getPostBySlug(slug);

  if (!post) {
    return { title: 'Article Non Trouv√©', description: 'Le contenu de cet article est introuvable.' };
  }

  return {
    title: post.title,
    description: post.description || post.content.substring(0, 150) + '...',
  };
} 
------------------------------------------- 
 
 
=============================================== 
 
[DOSSIER: \components]                                 
=============================================== 
 
[FICHIER 9] \components\AllPosts.tsx 
------------------------------------------- 
import { getAllPosts } from "@/lib/firestore";
import PostCard from "./PostCard";

export default async function AllPosts() {
  const posts = await getAllPosts();

  if (posts.length === 0) {
    return (
      <div className="text-center text-gray-500 py-10">
        Aucun article trouv√©.
      </div>
    );
  }

  return (
    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-12">
      {posts.map(post => (
        <PostCard key={post.id} post={post} />
      ))}
    </div>
  );
}
 
------------------------------------------- 
 
[FICHIER 10] \components\Footer.tsx 
------------------------------------------- 
// components/Footer.tsx
export default function Footer() {
  return (
    <footer className="bg-slate-900 border-t border-slate-700 py-6">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm text-gray-500">
        <p>
          &copy; {new Date().getFullYear()} Mon Blog JS. Tous droits r√©serv√©s.
        </p>
        <p className="mt-1">
          Projet d'apprentissage Next.js et Firebase.
        </p>
      </div>
    </footer>
  );
} 
------------------------------------------- 
 
[FICHIER 11] \components\Header.tsx 
------------------------------------------- 
'use client';

import { useState, useEffect } from "react";
import Link from "next/link";
import { auth } from "@/lib/firebase"; // Importation de Firebase Auth
import { signOut, onAuthStateChanged, User } from "firebase/auth";
import LoginModal from "@/components/LoginModal";  // Importation de la modal de connexion

export default function Header() {
  const [user, setUser] = useState<User | null>(null); // Suivi de l'utilisateur connect√©
  const [isModalOpen, setIsModalOpen] = useState(false); // √âtat pour la modal
  const [avatar, setAvatar] = useState<string>("/default-avatar.png"); // Toujours initialiser avec l'avatar par d√©faut
  const [email, setEmail] = useState<string>("");
  const [isAdmin, setIsAdmin] = useState(false); // Nouvel √©tat pour v√©rifier si l'utilisateur est admin

  // Suivi de l'√©tat d'authentification
  useEffect(() => {
    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {
      if (currentUser) {
        setUser(currentUser);
        setEmail(currentUser.email || ""); // Stocker l'email de l'utilisateur
        // V√©rifier que photoURL est valide avant de l'utiliser
        if (currentUser.photoURL && isValidUrl(currentUser.photoURL)) {
          setAvatar(currentUser.photoURL);
        } else {
          setAvatar("/default-avatar.png");
        }

        // V√©rifier si l'utilisateur est un admin
        currentUser.getIdTokenResult().then((idTokenResult) => {
          if (idTokenResult.claims.role === 'admin') {
            setIsAdmin(true);
          }
        }).catch((error) => {
          console.error("Erreur lors de la r√©cup√©ration des claims : ", error);
        });

      } else {
        setUser(null);
        setAvatar("/default-avatar.png");
        setEmail(""); // R√©initialiser l'email √† la d√©connexion
        setIsAdmin(false); // R√©initialiser l'√©tat d'admin
      }
    });
    return unsubscribe;
  }, []);

  // Fonction pour valider l'URL
  const isValidUrl = (urlString: string) => {
    try {
      const url = new URL(urlString);
      return url.protocol === "http:" || url.protocol === "https:";
    } catch (e) {
      return false;
    }
  };

  const handleLogout = async () => {
    try {
      await signOut(auth);
    } catch (error) {
      console.error("Erreur de d√©connexion:", error);
    }
  };

  const openModal = () => setIsModalOpen(true);
  const closeModal = () => setIsModalOpen(false);

  return (
    <header className="bg-slate-900 shadow-md border-b border-slate-700">
      <nav className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
        <Link href="/" className="text-3xl font-extrabold text-white hover:text-blue-400 transition duration-150">
          Mon Blog Moto
        </Link>
        <div className="space-x-4 flex items-center">
          <Link href="/" className="text-gray-300 hover:text-blue-400 font-medium transition duration-150">
            Accueil
          </Link>

          {/* Afficher le bouton "Admin" seulement si l'utilisateur est admin */}
          {isAdmin && (
            <Link href="/admin" className="text-blue-400 hover:text-blue-300 font-medium border border-blue-400 px-3 py-1 rounded-md transition duration-150">
              Admin
            </Link>
          )}
          
          {user ? (
            <div className="flex flex-col sm:flex-row items-center sm:space-x-3 space-y-3 sm:space-y-0">
              <img 
                src={avatar} 
                alt="Avatar" 
                className="w-8 h-8 rounded-full" 
                onError={(e) => {
                  // Simplement remplacer par l'avatar par d√©faut une seule fois
                  e.currentTarget.src = "/default-avatar.png";
                }}
              />
              <div className="text-white flex flex-col items-center sm:items-start">
                <span>{user.displayName || email}</span>
                {/* Afficher l'ic√¥ne üîë si l'utilisateur est un admin */}
                {isAdmin && (
                  <span className="text-yellow-500 ml-2">üîë</span>  // Ic√¥ne cl√© pour admin
                )}
              </div>

              <button
                onClick={handleLogout}
                className="text-gray-300 hover:text-blue-400 font-medium sm:px-4 px-2 py-1 rounded-md bg-blue-500 text-white w-full sm:w-auto"
              >
                D√©connexion
              </button>
            </div>
          ) : (
            <button
              onClick={openModal}
              className="text-gray-300 hover:text-blue-400 font-medium sm:px-4 px-2 py-1 rounded-md bg-blue-500 text-white w-full sm:w-auto"
            >
              Connexion
            </button>
          )}
        </div>
      </nav>

      {isModalOpen && <LoginModal closeModal={closeModal} />}
    </header>
  );
}
 
------------------------------------------- 
 
[FICHIER 12] \components\LatestPost.tsx 
------------------------------------------- 
// components/LatestPost.tsx

import { getLatestPost } from '@/lib/firestore';
import Link from 'next/link';
import Image from 'next/image'; 
import { Post } from '@/lib/firestore'; 

export default async function LatestPost() {
  
  const post: Post | null = await getLatestPost();

  if (!post) {
    return (
      <div className="text-center text-gray-500 py-10">
        <p>Aucun article de blog n'a encore √©t√© publi√©.</p>
        <p className="mt-2 text-sm">Veuillez ajouter un document √† la collection 'Blog' de Firestore.</p> 
      </div>
    );
  }

  const dateStr = post.createdAt?.toDate().toLocaleDateString('fr-FR', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  }) || 'Date inconnue';
  
  const postUrl = `/posts/${post.slug || post.id}`;

  return (
    <div className="max-w-4xl mx-auto p-8 bg-slate-800 rounded-xl shadow-2xl border border-slate-700 hover:border-blue-500 transition duration-300">
      
      {/* üåü CORRECTION : Utilisation de l'aspect-ratio pour une image 16:9 responsive */}
      {post.imageUrl && (
        <div className="mb-6 overflow-hidden rounded-lg">
          {/* Remplacer h-64 par aspect-video (16/9) ou aspect-w-16/aspect-h-9 pour un ratio plus classique de blog. */}
          {/* Si vous utilisez une version r√©cente de Tailwind (v3+), aspect-video fonctionne directement. */}
          <div className="relative w-full aspect-video"> 
            <Image
              src={post.imageUrl}
              alt={post.title}
              fill
              // object-cover garantit qu'il couvre le conteneur 16:9, coupant les bords si l'image originale a un ratio diff√©rent.
              className="object-cover" 
              sizes="(max-width: 1024px) 100vw, 768px"
              priority 
            />
          </div>
        </div>
      )}

      <h2 className="text-3xl font-bold mb-3 text-blue-400">
        {post.title}
      </h2>
      <p className="text-sm text-gray-500 mb-6">
        Publi√© le : {dateStr}
      </p>
      
      <div className="text-gray-300 leading-relaxed">
        <p>{post.description}</p>
      </div>

      <Link
        href={postUrl}
        className="mt-6 inline-block px-4 py-2 bg-blue-600 text-white font-medium rounded-lg shadow-md hover:bg-blue-500 transition duration-300"
      >
        Lire l'article complet
      </Link>
    </div>
  );
} 
------------------------------------------- 
 
[FICHIER 13] \components\LoginModal.tsx 
------------------------------------------- 
'use client';

import { useState } from "react";
import { auth } from "@/lib/firebase"; // Importation de Firebase pour la gestion de l'authentification
import { GoogleAuthProvider, signInWithPopup, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "firebase/auth";

export default function LoginModal({ closeModal }: { closeModal: () => void }) {
  const [isLogin, setIsLogin] = useState(true);
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [error, setError] = useState("");

  const handleGoogleLogin = async () => {
    const provider = new GoogleAuthProvider();
    try {
      await signInWithPopup(auth, provider);
      closeModal(); 
    } catch (err) {
      console.error("Erreur lors de la connexion avec Google : ", err);
    }
  };

  const handleEmailLogin = async () => {
    try {
      await signInWithEmailAndPassword(auth, email, password);
      closeModal(); 
    } catch (err) {
      setError("Erreur de connexion : V√©rifiez vos identifiants.");
    }
  };

  const handleEmailSignUp = async () => {
    try {
      await createUserWithEmailAndPassword(auth, email, password);
      closeModal(); 
    } catch (err) {
      setError("Erreur de cr√©ation de compte : Veuillez v√©rifier vos informations.");
    }
  };

  return (
    <div 
      className="fixed inset-0 flex justify-center items-center z-50" 
      style={{ backgroundColor: 'rgba(0, 0, 0, 0.5)' }} // Utilisation de rgba pour un fond semi-transparent
    >
      <div className="bg-white p-6 rounded-lg w-96 dark:bg-gray-800 dark:text-white">
        <h2 className="text-xl font-semibold text-center">{isLogin ? "Se connecter" : "Cr√©er un compte"}</h2>
        <form className="mt-4">
          <div>
            <label htmlFor="email" className="block text-sm">Email</label>
            <input
              type="email"
              id="email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              className="w-full p-2 border rounded mt-1 dark:bg-gray-700 dark:text-white"
              required
            />
          </div>
          <div className="mt-2">
            <label htmlFor="password" className="block text-sm">Mot de passe</label>
            <input
              type="password"
              id="password"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              className="w-full p-2 border rounded mt-1 dark:bg-gray-700 dark:text-white"
              required
            />
          </div>
          {error && <p className="text-red-500 text-sm mt-2">{error}</p>}
          <div className="mt-4">
            {isLogin ? (
              <button
                type="button"
                onClick={handleEmailLogin}
                className="w-full bg-blue-500 text-white py-2 rounded"
              >
                Connexion
              </button>
            ) : (
              <button
                type="button"
                onClick={handleEmailSignUp}
                className="w-full bg-green-500 text-white py-2 rounded"
              >
                Cr√©er un compte
              </button>
            )}
          </div>
        </form>

        <div className="flex justify-center mt-4">
          <button
            onClick={handleGoogleLogin}
            className="bg-red-500 text-white py-2 px-4 rounded"
          >
            Se connecter avec Google
          </button>
        </div>

        <div className="mt-4 text-center">
          <button
            onClick={() => setIsLogin(!isLogin)}
            className="text-blue-500 text-sm"
          >
            {isLogin ? "Cr√©er un compte ?" : "D√©j√† un compte ?"}
          </button>
        </div>

        <div className="mt-4 text-center">
          <button onClick={closeModal} className="text-gray-500 dark:text-gray-300">
            Fermer
          </button>
        </div>
      </div>
    </div>
  );
}
 
------------------------------------------- 
 
[FICHIER 14] \components\PostCard.tsx 
------------------------------------------- 
import Image from 'next/image';
import Link from 'next/link';
// Importez l'interface Post du fichier d'origine qui est TypeScript
import { Post } from '@/lib/firestore'; 

interface PostCardProps {
    post: Post;
}

/**
 * Composant pour afficher un r√©sum√© d'article sous forme de carte.
 * Il pr√©sente l'image √† gauche et les m√©tadonn√©es/description √† droite.
 */
export default function PostCard({ post }: PostCardProps) {
    const displayDate = post.createdAt.toDate().toLocaleDateString('fr-FR');
    const postUrl = `/posts/${post.slug}`;

    // Fonction pour tronquer la description √† un nombre de caract√®res (ex: 200)
    const truncateDescription = (text: string, limit: number) => {
        if (!text || text.length <= limit) {
            return text;
        }
        // Trouve le dernier espace avant la limite
        const trimmedText = text.substring(0, limit);
        return trimmedText.substring(0, Math.min(trimmedText.length, trimmedText.lastIndexOf(' '))) + '...';
    };

    const shortDescription = truncateDescription(post.description, 200);

    return (
        <div className="bg-slate-800 rounded-xl shadow-lg hover:shadow-2xl transition duration-300 overflow-hidden border border-slate-700">
            {/* Le lien englobe toute la zone cliquable */}
            <Link href={postUrl} className="flex flex-col md:flex-row h-full">
                
                {/* Conteneur pour l'Image et les M√©tadonn√©es (gauche/haut) */}
                <div className="relative w-full md:w-1/3 bg-slate-900 overflow-hidden flex flex-col">
                    {/* Image principale */}
                    <div className="relative w-full h-48 md:h-full">
                        {post.imageUrl ? (
                            <Image
                                src={post.imageUrl}
                                alt={post.title}
                                fill
                                style={{ objectFit: 'cover' }}
                                sizes="(max-width: 768px) 100vw, 33vw"
                                className="transition-transform duration-500 hover:scale-110"
                            />
                        ) : (
                            <div className="flex items-center justify-center w-full h-full text-gray-400 text-sm">
                                Pas d'image
                            </div>
                        )}
                    </div>
                    
                    {/* Auteur et Date (EN DESSOUS de l'image sur Mobile/Tablet, ou dans la colonne de gauche) */}
                    <div className="p-3 bg-slate-900 border-t border-slate-700 text-xs text-gray-400">
                        <p className="font-semibold text-white">Par : {post.author}</p>
                        <p>Publi√© le : {displayDate}</p>
                    </div>
                </div>

                {/* Contenu (Titre et Description Tronqu√©e) (droite/bas) */}
                <div className="p-4 md:w-2/3 flex flex-col justify-between">
                    <div>
                        <h2 className="text-2xl font-bold text-white mb-2 leading-tight hover:text-indigo-400 transition">
                            {post.title}
                        </h2>
                        
                        {/* Description Tronqu√©e */}
                        <p className="text-gray-300 text-base mt-2">
                            {shortDescription}
                        </p>
                    </div>

                    {/* Lien "Lire la suite" */}
                    <div className="mt-4">
                        <span className="inline-block px-4 py-2 text-indigo-400 border border-indigo-400 font-semibold rounded-lg hover:bg-indigo-400 hover:text-white transition duration-300">
                            Lire la suite ‚Üí
                        </span>
                    </div>
                </div>
            </Link>
        </div>
    );
} 
------------------------------------------- 
 
 
=============================================== 
 
[DOSSIER: \lib]                                 
=============================================== 
 
[FICHIER 15] \lib\firebase.js 
------------------------------------------- 
import { initializeApp } from "firebase/app";
import { getFirestore, Timestamp } from "firebase/firestore";
import { getAuth } from "firebase/auth"; // Import de Firebase Auth

const firebaseConfig = {
  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,
  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,
  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,
  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,
  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,
  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,
};

const app = initializeApp(firebaseConfig);

const db = getFirestore(app);
const auth = getAuth(app); // Initialisation de l'authentification Firebase

export { db, Timestamp, auth };  // Exportation de auth pour l'utiliser ailleurs dans l'app
 
------------------------------------------- 
 
[FICHIER 16] \lib\firestore.ts 
------------------------------------------- 
// lib/firestore.ts

import { db, Timestamp } from './firebase';
// Import de 'where' est n√©cessaire pour la fonction getPostBySlug
import { collection, query, orderBy, limit, getDocs, where } from 'firebase/firestore'; 

// D√©finition de l'interface pour un Article de Blog (bas√©e sur votre structure Firestore)
export interface Post {
  id: string;
  title: string;
  slug: string;
  content: string; // Contenu complet de l'article
  createdAt: Timestamp; // Le type Timestamp de Firebase
  author: string;
  description: string;
  imageUrl: string;
  isPublished: boolean;
  tags: string[];
}

/**
 * R√©cup√®re le dernier article du blog depuis la collection 'Blog' de Firestore.
 * Cette fonction est appel√©e c√¥t√© serveur (dans un Server Component).
 * @returns Le dernier article (Post) ou null.
 */
export async function getLatestPost(): Promise<Post | null> {
  try {
    const blogCollectionRef = collection(db, 'Blog'); 

    // Requ√™te: trier par 'createdAt' (descendant) et limiter √† 1
    const q = query(
      blogCollectionRef,
      orderBy('createdAt', 'desc'),
      limit(1)
    );

    const querySnapshot = await getDocs(q);

    if (!querySnapshot.empty) {
      const doc = querySnapshot.docs[0];
      const data = doc.data();

      // Utilisation du type Post gr√¢ce √† l'extension .ts
      return { 
        id: doc.id, 
        author: data.author,
        content: data.content,
        createdAt: data.createdAt,
        description: data.description,
        imageUrl: data.imageUrl,
        isPublished: data.isPublished,
        slug: data.slug,
        tags: data.tags,
        title: data.title,
      } as Post;
    } else {
      return null; // Aucun article trouv√©
    }
  } catch (error) {
    // Loggez l'erreur pour le d√©bogage c√¥t√© serveur
    console.error("Erreur lors de la r√©cup√©ration du dernier article:", error);
    return null; 
  }
}

/**
 * R√©cup√®re un article par son slug.
 * @param slug Le slug de l'article √† rechercher.
 * @returns L'article (Post) ou null.
 */
export async function getPostBySlug(slug: string): Promise<Post | null> {
    try {
        const blogCollectionRef = collection(db, 'Blog'); 

        // Requ√™te: filtrer par le champ 'slug' √©gal au slug fourni
        // NOTE: Firestore peut n√©cessiter un index pour cette requ√™te de filtre (o√π)
        const q = query(
            blogCollectionRef,
            where('slug', '==', slug), // Filtrer par slug
            limit(1)
        );

        const querySnapshot = await getDocs(q);

        if (!querySnapshot.empty) {
            const doc = querySnapshot.docs[0];
            const data = doc.data();

            return { 
                id: doc.id, 
                author: data.author,
                content: data.content,
                createdAt: data.createdAt,
                description: data.description,
                imageUrl: data.imageUrl,
                isPublished: data.isPublished,
                slug: data.slug,
                tags: data.tags,
                title: data.title,
            } as Post;
        } else {
            return null; // Aucun article trouv√©
        }
    } catch (error) {
        console.error(`Erreur lors de la r√©cup√©ration de l'article avec slug ${slug}:`, error);
        return null; 
    }
}
export async function getAllPosts(): Promise<Post[]> {
  try {
    const blogCollectionRef = collection(db, 'Blog');

    const q = query(
      blogCollectionRef,
      orderBy('createdAt', 'desc') // du plus r√©cent au plus ancien
    );

    const snapshot = await getDocs(q);

    return snapshot.docs.map(doc => ({
      id: doc.id,
      ...(doc.data() as Omit<Post, "id">),
    }));
  } catch (error) {
    console.error("Erreur getAllPosts:", error);
    return [];
  }
}
 
------------------------------------------- 
 
[FICHIER 17] \lib\supabaseClient.ts 
------------------------------------------- 
 
------------------------------------------- 
 
[FICHIER 18] \lib\temp.js 
------------------------------------------- 
 
------------------------------------------- 
 
 
=============================================== 
 
[SECTION 3] FICHIER .ENV.LOCAL (STRUCTURE
======================================================= 
 
[FICHIER 19] \.env.local             
************************************************ 
NOTA: Les valeurs sensibles sont masquees           
************************************************ 
 
# Firebase (sans Storage)=***VALUE_MASQUEE***        
NEXT_PUBLIC_FIREBASE_API_KEY=***VALUE_MASQUEE***        
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=***VALUE_MASQUEE***        
NEXT_PUBLIC_FIREBASE_PROJECT_ID=***VALUE_MASQUEE***        
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=***VALUE_MASQUEE***        
NEXT_PUBLIC_FIREBASE_APP_ID=***VALUE_MASQUEE***        
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=***VALUE_MASQUEE***        
FIREBASE_ADMIN_KEY_PATH=***VALUE_MASQUEE***        
# Cloudinary (solution stockage)=***VALUE_MASQUEE***        
NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME=***VALUE_MASQUEE***        
NEXT_PUBLIC_CLOUDINARY_API_KEY=***VALUE_MASQUEE***        
CLOUDINARY_API_SECRET=***VALUE_MASQUEE***        
# Supabase(solution stockage)=***VALUE_MASQUEE***        
NEXT_PUBLIC_SUPABASE_URL=***VALUE_MASQUEE***        
NEXT_PUBLIC_SUPABASE_ANON_KEY=***VALUE_MASQUEE***        
SUPABASE_SERVICE_ROLE_KEY=***VALUE_MASQUEE***        
# NextAuth=***VALUE_MASQUEE***        
NEXTAUTH_URL=***VALUE_MASQUEE***        
NEXTAUTH_SECRET=***VALUE_MASQUEE***        
 
************************************************ 
 
 
======================================================= 
RESUM√â FINAL                                            
======================================================= 
 
Nombre total de fichiers: 19             
Dossiers inclus: app, components, lib                  
Date de generation: 11/12/2025 13:16:45,78                        
======================================================= 
======================================================= 
